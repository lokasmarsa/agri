var dataLayer=window.dataLayer=window.dataLayer||[];var validateAlias=function(b,f){var a;var d=[];var c={};c["reservationId"]=$("#hReservationId").val();c["username"]=b;$.ajax({url:"/entreg/json/ValidateAliasAction",cache:false,type:"post",dataType:"json",data:c}).done(function(j){if(j.rs=="alternate"){$.each(j.alternateNameList,function(){d.push(this);
});a="alternate";}else{if(j.errors){var k="";for(var g=0;g<j.errors.length;g++){k+=(j.errors[g]);}a=k;}else{if(j.fieldErrors){var k="";for(fieldName in j.fieldErrors){if(j.fieldErrors.hasOwnProperty(fieldName)){for(var h=0;h<j.fieldErrors[fieldName].length;h++){k+=(j.fieldErrors[fieldName][h]);}}}a=k;
}else{$("#hReservationId").val(j.reservationId);a=j.rs;}}}f(a,d);}).always(function(g){}).fail(function(){});};$("#check-username-response").on("change","input:radio[name=roptUn]",function(a){$("#tuserName").val($(this).val());$("#tuserName").trigger("keyup").trigger("focusout");$("#tPassword").focus();
});$("#check-username-response-m").on("change","input:radio[name=roptUn]",function(a){$("#tuserName").val($(this).val());$("#tuserName").trigger("keyup").trigger("focusout");$("#tPassword").focus();});var urbanization=function(){if($("#sstate").val()==UspsEnterpriseReg.PUERTO_RICO_ABBR){$("#urbanCode").removeClass("hidden");
}else{$("#urbanCode").addClass("hidden");$("#tUrbanCode").val("");}};var countrySwap=function(){$("#addressHolderStep1 div.form-group").removeClass("has-error");if($("#scountry").val()!=UspsEnterpriseReg.UNITED_STATES){$("#international").removeClass("hidden");$("#us").addClass("hidden");$("#id-proof-btn-row").fadeIn();
}else{$("#international").addClass("hidden");$("#us").removeClass("hidden");$("#id-proof-btn-row").hide();}};var progressWizard=function(a,b){$("#"+a+"").addClass("hidden");$("#"+b+"").removeClass("hidden");$("#"+a+"-heading").addClass("hidden");$("#"+b+"-heading").removeClass("hidden");if($("#"+a+"-sub-heading").length>0){$("#"+a+"-sub-heading").addClass("hidden");
}if($("#"+b+"-sub-heading").length>0){$("#"+b+"-sub-heading").removeClass("hidden");}};var progressWizardFinished=function(b,c,a){a=a||"";if($("#ams-verified").val()=="true"){$("#"+a+"confirmed-address").removeClass("hidden");$("#"+a+"unconfirmed-address").addClass("hidden");}else{$("#"+a+"confirmed-address").addClass("hidden");
$("#"+a+"unconfirmed-address").removeClass("hidden");}$("#address-c").val("true");$("#"+b+"").addClass("hidden");$("#"+c+"").removeClass("hidden");};var clearAddressForm=function(){$("#addressHolderStep1 select").prop("selectedIndex",0);$("#addressHolderStep1 input").val("");};var resetLookupPanels=function(){$("[id*='Step']").addClass("hidden");
$("[id*='Step1']").removeClass("hidden");countrySwap();$("#address-c").val("false");$("#ams-verified").val("false");$("#company-crid").val("");$("#deliverypoint").val("");$("#id-proof-btn-row").hide();};var addressWizardPersonalSetup=function(){$("#company-wrap").addClass("hidden");$("#a-address-step1").off().on("click",personalAddressStep1);
$("#a-address-step2").off().on("click",personalAddressStep2);$("#addressHolderStep2 a[id^='a-address-step2-prev']").off().on("click",personalAddressStep2Prev);$("#a-address-step3").off().on("click",personalAddressStep3);$("#addressHolderStep3 a[id^='a-address-step3-prev']").off().on("click",personalAddressStep3Prev);
$("#a-address-step4").off();$("#a-address-step4-prev").off();$("#a-address-step5").off();$("#a-address-step6-prev").off().on("click",personalAddressStep6Prev);};var addressWizardBusinessSetup=function(){$("#company-wrap").removeClass("hidden");$("#a-address-step1").off().on("click",businessAddressStep1);
$("#a-address-step2").off().on("click",businessAddressStep2);$("#a-address-step2-prev").off().on("click",businessAddressStep2Prev);$("#a-address-step3").off().on("click",businessAddressStep3);$("#a-address-step3-prev").off().on("click",businessAddressStep3Prev);$("#a-address-step4").off().on("click",businessAddressStep4);
$("#a-address-step4-prev").off().on("click",businessAddressStep4Prev);$("#a-address-step5").off().on("click",businessAddressStep5);$("#a-address-step6-prev").off().on("click",businessAddressStep6Prev);};var addressObjDebug=function(a){console.log(a.company);console.log(a.address1);console.log(a.address2);
console.log(a.address3);console.log(a.city);console.log(a.state);console.log(a.postalcode);console.log(a.deliverypoint);console.log(a.urbancode);console.log(a.country);};var populateAddressForm=function(a){$("#tcompany").val(htmlDecode(a.company));$("#scountry").val(a.country);if(a.country==UspsEnterpriseReg.UNITED_STATES){$("#taddress").val(htmlDecode(a.address1));
$("#tapt").val(htmlDecode(a.address2));$("#tcity").val(a.city);$("#sstate").val(a.state);urbanization();$("#tzip").val(a.postalcode);$("#deliverypoint").val(a.deliverypoint);$("#turbanCode").val(a.urbancode);}else{$("#taddress1").val(htmlDecode(a.address));$("#taddress2").val(htmlDecode(a.address2));
$("#taddress3").val(htmlDecode(a.address3));$("#tcityInt").val(a.city);$("#tprovince").val(a.state);$("#tpostalCode").val(a.postalcode);}};var populateFinalAddressDisplay=function(a){$("#final-address div span.fname").html(sanitizeHtmlOut($("#tfName").val()));$("#final-address div span.lname").html(sanitizeHtmlOut($("#tlName").val()));
$("#final-address div.company").html(sanitizeHtmlOut(a.company));$("#final-address div.address1").html(sanitizeHtmlOut(a.address1));$("#final-address div.address2").html(sanitizeHtmlOut(a.address2));$("#final-address div.address3").html(sanitize(a.address3));$("#final-address div span.city").html(sanitizeHtmlOut(a.city));
$("#final-address div span.state").html(sanitizeHtmlOut(a.state));$("#final-address div span.zip").html(sanitizeHtmlOut(a.postalcode));$("#final-address div.urban").html(sanitizeHtmlOut(a.urbancode));};var rangeCalc=function(b,w){var f="";var o="";var v=false;var r=false;var n=false;var p=false;var s=$("#div-"+b.attr("id")+" span.address1").html();
var a=s.indexOf("("),g=s.indexOf(")");if(a==0){n=true;}if(a>-1&&g>a){f=s.substr(0,a)+s.substr(g+1);o=s.substr(a+1,((g-1)-a));var z=o.split(" ");var u=1,k=2,j="",y="";var l="";var d="";if(z.length==4){l=z[1];d=z[3];}else{l=z[2];d=z[4];if(z[0].toLowerCase()=="odd"){v=true;}if(z[0].toLowerCase()=="even"){r=true;
}}if($.isNumeric(l)){u=parseInt(l);}else{u=parseInt(l.match(/\d+/));j=l.match(/[a-zA-Z]+/);if(l.indexOf(j)==0){p=true;}}if($.isNumeric(d)){k=parseInt(d);}else{k=parseInt(d.match(/\d+/));y=d.match(/[a-zA-Z]+/);}var m="",c="";if(u<k){var h=true;for(var t=u;t<=k;t++){if(v){h=(t%2==0)?false:true;}else{if(r){h=(t%2==0)?true:false;
}}if(h){if(j!=""){c=(p)?j+t:t+j;}else{c=t;}m+='<option value="'+c+'">'+c+"</option>";}}}else{if(j[0].toLowerCase()==y[0].toLowerCase()){var x=[];var q=l.match(/\d(.+)$/)[1];while(String(q).charCodeAt(0)<=String(d.match(/\d(.+)$/)[1]).charCodeAt(0)){x.push(q);q=String.fromCharCode(String(q).charCodeAt(0)+1);
}for(var t=0;t<x.length;t++){c=j+u+x[t];m+='<option value="'+c+'">'+c+"</option>";}}else{var x=[];var q=j;while(String(q).charCodeAt(0)<=String(y).charCodeAt(0)){x.push(q);q=String.fromCharCode(String(q).charCodeAt(0)+1);}for(var t=0;t<x.length;t++){c=($.isNumeric(u))?((p)?x[t]+u:u+x[t]):x[t];m+='<option value="'+c+'">'+c+"</option>";
}}}$("#"+w+"ste-range").empty().append(m);}if(n){$("#"+w+"range-address1").before($("#"+w+"ste-range"));$("#"+w+"ste-range").addClass("begin");}else{$("#"+w+"ste-range").before($("#"+w+"range-address1"));$("#"+w+"ste-range").removeClass("begin");}$("#"+w+"range-address1").html(f);$("#"+w+"range-address2").html($("#div-"+b.attr("id")+" span.address2").html());
$("#"+w+"range-city").html($("#div-"+b.attr("id")+" span.city").html());$("#"+w+"range-state").html($("#div-"+b.attr("id")+" span.state").html());$("#"+w+"range-zip").html($("#div-"+b.attr("id")+" span.zip").html());};var updateViewport=function(a,f,b){b=b||260;var c=$("#"+a).height();if(c<b){$("#"+f+" .viewport").css("height",(c+20));
}else{$("#"+f+" .viewport").css("height",b);}var d=$("#"+f).data("plugin_tinyscrollbar");d.update();};var amsLookupService=function(b,c){var a;$.ajax({url:"/entreg/json/AmsValidateLookupAction",cache:false,type:"post",data:{taddress:b.address1,tapt:b.address2,tcity:b.city,sstate:b.state,tzip:b.postalcode,turban:b.urbancode,scountry:b.country}}).done(function(d){a={"rs":d.rs,"data":d};
c(a);}).always(function(){}).fail(function(){a={"rs":"error","error":e.message};});};var amsValidateService=function(b,c){var a;$.ajax({url:"/entreg/json/AmsValidateAction",cache:false,type:"post",data:{tfName:b.fname,tlName:b.lname,temail:b.email,taddress:b.address1,tapt:b.address2,tcity:b.city,sstate:b.state,tzip:b.postalcode,turban:b.urbancode,scountry:b.country}}).done(function(d){a={"rs":d.rs,"data":d};
c(a);}).always(function(){}).fail(function(){a={"rs":"error","error":e.message};});};var amsUpdateService=function(b,c){var a;$.ajax({url:"/entreg/secure/json/AmsUpdateAction",cache:false,type:"post",data:{taddress:b.address,tapt:b.apt,tcity:b.city,sstate:b.state,tzip:b.zip,turbanCode:b.urbancode,scountry:b.country}}).done(function(d){a={"rs":d.rs,"data":d};
c(a);}).always(function(){}).fail(function(){a={"rs":"error","error":e.message};});};var matchingCompanyLookupService=function(c,d,b,f){var a;$.ajax({url:"/entreg/json/MatchingCompanyLookupAction",cache:false,type:"post",data:{companyName:c.company,address:c.address1,apt:c.address2,address3:c.address3,city:c.city,state:c.state,urban:c.urbancode,zip:c.postalcode,country:c.country,companyMatch:d,crid:b}}).done(function(g){a={"rs":g.rs,"data":g};
f(a);}).always(function(){}).fail(function(){a={"rs":"error","error":e.message};});};var validateAddressService=function(b,c){var a;$.ajax({url:"/entreg/json/ValidateAddressAction",cache:false,type:"post",data:{scountry:$.trim(b.scountry),tcompany:$.trim(b.tcompany),taddress:$.trim(b.taddress),tapt:$.trim(b.tapt),tcity:$.trim(b.tcity),sstate:$.trim(b.sstate),tzip:$.trim(b.tzip),turbanCode:$.trim(b.turbancode),taddress1:$.trim(b.taddress1),taddress2:$.trim(b.taddress2),taddress3:$.trim(b.taddress3),tcityInt:$.trim(b.tcityInt),tprovince:$.trim(b.tprovince),tpostalCode:$.trim(b.tpostalCode),accountType:b.accountType}}).done(function(d){a={"rs":d.rs,"data":d};
c(a,b);}).always(function(){}).fail(function(){a={"rs":"error","error":e.message};});};var companiesSimilarService=function(c,d,b,f){var a;$.ajax({url:"/entreg/json/CompaniesSimilarAction",cache:false,type:"post",data:{companyName:c.company,address:c.address1,apt:c.address2,city:c.city,state:c.state,postalcode:c.postalcode,urban:c.urbancode,country:c.country,doNotAms:c.doNotAMS,companyMatch:d,crid:b}}).done(function(g){a={"rs":g.rs,"data":g};
f(a);}).always(function(){}).fail(function(){a={"rs":"error","error":e.message};});};var addCompanyService=function(b,c){var a;$.ajax({url:"/entreg/json/AddCompanyAction",cache:false,type:"post",data:{companyName:b.company,address:b.address1,apt:b.address2,address3:b.address3,city:b.city,state:b.state,zip:b.postalcode,urban:b.urbancode,country:b.country,doNotAms:b.doNotAMS}}).done(function(d){a={"rs":d.rs,"data":d};
c(a);}).always(function(){}).fail(function(){a={"rs":"error","error":e.message};});};var eFXSimilarService=function(d,b,a,f){var c;$.ajax({url:"/entreg/json/EFXSimilarAction",cache:false,type:"post",data:{crid:d,groupRefId:b,addressRefId:a}}).done(function(g){c={"rs":g.rs,"data":g};f(c);}).always(function(){}).fail(function(){c={"rs":"error","error":e.message};
});};var setupStepAMS=function(f,d,a){a=a||"";if(f.amsStatus==UspsEnterpriseReg.ADDRESS_NOT_FOUND||f.amsAddressList.length<1){$("#"+d+" .found").addClass("hidden");$("#"+d+" .notfound").removeClass("hidden");}else{$("#"+d+" .found").removeClass("hidden");$("#"+d+" .notfound").addClass("hidden");}$("#div-"+a+"ams-same label span.address1").html(f.address);
$("#div-"+a+"ams-same label span.address2").html(f.apt);$("#div-"+a+"ams-same label span.city").html(f.city);$("#div-"+a+"ams-same label span.state").html(f.state);$("#div-"+a+"ams-same label span.zip").html(f.zip);$("#div-"+a+"ams-same label span.urban").html(f.urban);var b=[];var c=0;$.each(f.amsAddressList,function(){c++;
var g="false";if((/\(range/i.test(this.addressLine1))||(/\(even range/i.test(this.addressLine1))||(/\(odd range/i.test(this.addressLine1))){g="true";}b.push('<div id="div-address'+c+'" class="radio">','<label for="address'+c+'">','<input type="radio" id="address'+c+'" name="address" rel="'+g+'" />','<span class="urban">'+((this.urbanizationCode!=null)?this.urbanizationCode:"")+"</span>",'<span class="address1">'+this.addressLine1.replace(/\sSTE\s/g,"<br>STE ")+"</span>",'<span class="address2">'+(this.addressLine2!=null)?this.addressLine2:""+"</span>",'<span class="city">'+this.city+'</span> <span class="state">'+this.state+'</span> <span class="zip">'+this.postalCode+"</span>","</label>","</div>");
});$("#"+a+"#returnedAddresses").html(b.join(""));};var setupStepCompanyMatch=function(d,c,a){a=a||"";$("#"+a+"div-company-same-match label span.company").html(c.company);$("#"+a+"div-company-same-match label span.address1").html(c.address1);$("#"+a+"div-company-same-match label span.address2").html(c.address2);
$("#"+a+"div-company-same-match label span.address3").html(c.address3);$("#"+a+"div-company-same-match label span.city").html(c.city);$("#"+a+"div-company-same-match label span.state").html(c.state);$("#"+a+"div-company-same-match label span.urbancode").html(c.urbancode);$("#"+a+"div-company-same-match label span.postalcode").html(c.postalcode);
if(c.country!=UspsEnterpriseReg.UNITED_STATES){$("#"+a+"div-company-same-match label span.country").html((c.country).slice(4));}else{$("#"+a+"div-company-same-match label span.country").html("");}if(d.hasOwnProperty("companyMatchStatus")){if(d.companyMatchStatus=="COMPANY-EXACT-MATCH-FOUND"){$("#orginal-address").hide();
}else{$("#orginal-address").show();}}else{$("#orginal-address").show();}var f=[];var b=0;$.each(d.matchedCompaniesAddressList,function(){b++;f.push('<div id="div-'+a+"company-match-address"+b+'" class="radio">','<label for="'+a+"company-match-address"+b+'">','<input type="radio" id="'+a+"company-match-address"+b+'" name="'+a+'company-match-address" value="'+this.crid+'" />','<span class="company">'+this.companyName+"</span>",'<span class="urban">'+((this.urbanizationCode!=null)?this.urbanizationCode:"")+"</span>",'<span class="address1">'+this.addressLine1+"</span>",'<span class="address2">'+this.addressLine2+"</span>",'<span class="city">'+this.city+'</span> <span class="state">'+this.state+'</span> <span class="zip">'+this.postalCode+"</span>",'<span class="country">'+((this.country==UspsEnterpriseReg.UNITED_STATES)?"":(this.country).slice(4))+"</span>",'<span class="crid">CRID: '+this.crid+"</span>",'<span class="affiliatedUsers">Affiliated Users: '+this.affiliatedUsers+"</span>",'<span class="affiliatedUsers">CRID Creation Date: '+this.cridCreationDateFormatted+"</span>","</label>","</div>");
});$("#"+a+"returnedMatchedAddresses").html(f.join(""));};var setupStepEfxSimilars=function(c,a){a=a||"";var d=[];var b=0;$.each(c.matchedCompaniesAddressList,function(){b++;d.push('<div id="'+a+"div-efx-address"+b+'" class="radio">','<label for="'+a+"address-efx-match"+b+'">','<input type="radio" id="'+a+"address-efx-match"+b+'" name="'+a+'similar-address" value="'+this.crid+'" />','<span class="company">'+this.companyName+"</span>",'<span class="address1">'+this.addressLine1+"</span>",'<span class="address2">'+this.addressLine2+"</span>",'<span class="address3">'+this.addressLine3+"</span>",'<span class="city">'+this.city+'</span> <span class="state">'+this.state+'</span> <span class="zip">'+this.postalCode+"</span>","</label>","</div>");
});d.push('<div id="'+a+'div-efx-address0" class="radio">','<label for="'+a+'address-efx-match0">','<input type="radio" id="'+a+'address-efx-match0" name="'+a+'similar-address" value="0" />','<span class="company">None of the above</span>',"</label>","</div>");$("#"+a+"returnedEquifaxAddresses").html(d.join(""));
$("#group-ref-id").val(c.refId);$("#company-crid").val(c.crid);};var setupEligibility=function(a,b){$("#informed-delivery-opt-in").prop("checked",false);$("#btn-begin-create-account").addClass("disabled");if(a&&b){$(".eligibility-msg").addClass("hidden");$(".eligible-both").removeClass("hidden");$(".eligible").removeClass("hidden");
$(".ineligible").addClass("hidden");}else{if(a&&!b){$(".eligibility-msg").addClass("hidden");$(".eligible-informed-delivery").removeClass("hidden");$(".eligible").removeClass("hidden");$(".ineligible").addClass("hidden");}else{if(!a&&b){$(".eligibility-msg").addClass("hidden");$(".eligible-myusps").removeClass("hidden");
$(".eligible").removeClass("hidden");$(".ineligible").addClass("hidden");}else{$(".eligibility-msg").addClass("hidden");$(".eligible-none").removeClass("hidden");$(".eligible").addClass("hidden");$(".ineligible").removeClass("hidden");$("#btn-begin-create-account").removeClass("disabled");}}}if(a||b){dataLayer.push({"event":"vpvInformedDelivery","virtualPageName":"id-address-eligible"});
}else{dataLayer.push({"event":"vpvInformedDelivery","virtualPageName":"id-address-not-eligible"});}};var personalAddressStep1=function(c){c.preventDefault();var b=$(this);var a=$("#a-address-step1-back");if(!b.hasClass("disabled")){$("#addressHolderStep1 div.form-group").removeClass("has-error");$("#addressHolderStep1 span[id^='error-']").empty();
$("#addressHolderStep1 span[id^='sr-only-error-']").empty();amsAddressObj={fname:"Mr",lname:"ZIP",email:"mrzip@usps.com",address1:$.trim($("#taddress").val()),address2:$.trim($("#tapt").val()),city:$.trim($("#tcity").val()),state:$.trim($("#sstate").val()),postalcode:$.trim($("#tzip").val()),urbancode:$.trim($("#turbanCode").val()),country:$.trim($("#scountry").val())};
$.blockUI();b.addClass("disabled");a.addClass("disabled");amsValidateService(amsAddressObj,function(f){if(f.data.errors){var m="";for(var d=0;d<f.data.errors.length;d++){m+=('<div class="error">'+f.data.errors[d]+"</div>");}$("#step1-ams-address-error-msg").html(m).removeClass("hidden");b.removeClass("disabled");
a.removeClass("disabled");$.unblockUI();}else{if(f.data.fieldErrors){for(fieldName in f.data.fieldErrors){if(f.data.fieldErrors.hasOwnProperty(fieldName)){var k=$("[name='"+fieldName+"']").attr("id");$("#form-group-"+k).addClass("has-error");for(var h=0;h<f.data.fieldErrors[fieldName].length;h++){$("#sr-only-error-"+k).text(f.data.fieldErrors[fieldName][h]);
$("#error-"+k).append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(f.data.fieldErrors[fieldName][h])+"</span>");}}}$("#addressHolderStep1 div.form-group.has-error:first").find("input[type=text],textarea,select").filter(":visible:first").focus();
b.removeClass("disabled");a.removeClass("disabled");$.unblockUI();}else{if(f.data.rs=="error"){$("#step1-ams-address-error-msg").html(f.data.rsMsg).removeClass("hidden");b.removeClass("disabled");a.removeClass("disabled");$.unblockUI();}else{if(f.data.amsStatus==UspsEnterpriseReg.INVALID_ADDRESS){$("#form-group-taddress").addClass("has-error");
$("#taddress").attr("aria-invalid","true");$("#sr-only-error-taddress").text(sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_ADDRESS_MSG));$("#error-taddress").append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_ADDRESS_MSG)+"</span>");
b.removeClass("disabled");a.removeClass("disabled");$.unblockUI();}else{if(f.data.amsStatus==UspsEnterpriseReg.INVALID_CITY){$("#form-group-tcity").addClass("has-error");$("#tcity").attr("aria-invalid","true");$("#sr-only-error-tcity").text(sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_CITY_MSG));
$("#error-tcity").append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_CITY_MSG)+"</span>");b.removeClass("disabled");a.removeClass("disabled");$.unblockUI();}else{if(f.data.amsStatus==UspsEnterpriseReg.INVALID_STATE){$("#form-group-sstate").addClass("has-error");
$("#sstate").attr("aria-invalid","true");$("#sr-only-error-sstate").text(sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_STATE_MSG));$("#error-sstate").append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_STATE_MSG)+"</span>");
b.removeClass("disabled");a.removeClass("disabled");$.unblockUI();}else{if(f.data.amsStatus==UspsEnterpriseReg.INVALID_ZIPCODE){$("#form-group-tzip").addClass("has-error");$("#tzip").attr("aria-invalid","true");$("#sr-only-error-tzip").text(sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_ZIPCODE_MSG));
$("#error-tzip").append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_ZIPCODE_MSG)+"</span>");b.removeClass("disabled");a.removeClass("disabled");$.unblockUI();}else{if(f.data.amsStatus==UspsEnterpriseReg.EXACT_MATCH){var j={address1:$.trim(f.data.amsAddressList[0].addressLine1),address2:$.trim(f.data.amsAddressList[0].addressLine2),city:$.trim(f.data.amsAddressList[0].city),state:$.trim(f.data.amsAddressList[0].state),postalcode:$.trim(f.data.amsAddressList[0].postalCode),deliverypoint:$.trim(f.data.amsAddressList[0].deliveryPoint),urbancode:$.trim(f.data.amsAddressList[0].urbanizationCode),country:$.trim($("#scountry").val()),doNotAMS:false};
$("#ams-verified").val("true");populateFinalAddressDisplay(j);populateAddressForm(j);progressWizardFinished("addressHolderStep1","addressHolderStep6");$("#confirm-address-title").hide();$("#step-1-col-1").removeClass("hidden-xs");$("#step-1-col-2").removeClass("col-xs-12").addClass("col-xs-11");setupEligibility(f.data.eligibleForInformedDelivery,f.data.eligibleForMYUSPS);
b.removeClass("disabled");a.removeClass("disabled");$.unblockUI();}else{$("#ams-verified").val("false");$("#deliverypoint").val("");if(f.data.amsStatus=="ADDRESS NOT FOUND"||f.data.amsAddressList.length<1){$("#addressHolderStep2 .found").addClass("hidden");$("#addressHolderStep2 .not-found").removeClass("hidden");
}else{$("#addressHolderStep2 .found").removeClass("hidden");$("#addressHolderStep2 .not-found").addClass("hidden");}$("#for-ams-same span.urban").html(f.data.turban);$("#for-ams-same span.address1").html(f.data.taddress);$("#for-ams-same span.address2").html(f.data.tapt);$("#for-ams-same span.city").html(f.data.tcity);
$("#for-ams-same span.state").html(f.data.sstate);$("#for-ams-same span.zip").html(f.data.tzip);var g=[];var h=0;$.each(f.data.amsAddressList,function(){h++;var i="false";if((/\(range/i.test(this.addressLine1))||(/\(even range/i.test(this.addressLine1))||(/\(odd range/i.test(this.addressLine1))){i="true";
}g.push('<div id="div-address'+h+'" class="radio">','<label for="address'+h+'">','<input type="radio" id="address'+h+'" name="address" rel="'+i+'" />','<span class="urban">'+((this.urbanizationCode!=null)?this.urbanizationCode:"")+"</span>",'<span class="address1">'+this.addressLine1.replace(/\sSTE\s/g,"<br>STE ")+"</span>",'<span class="address2">'+(this.addressLine2!=null)?this.addressLine2:""+"</span>",'<span class="city">'+this.city+'</span> <span class="state">'+this.state+'</span> <span class="zip">'+this.postalCode+"</span>","</label>","</div>");
});$("#returnedAddresses").html(g.join(""));$("#returnedAddresses :radio:first").attr("checked",true);progressWizard("addressHolderStep1","addressHolderStep2");$("#verification-returned-addresses").removeClass("hidden");$("#verification-returned-addresses-btns").removeClass("hidden");updateViewport("returnedAddresses","returned-addresses-scrollbar");
b.removeClass("disabled");a.removeClass("disabled");$.unblockUI();dataLayer.push({"event":"vpvInformedDelivery","virtualPageName":"id-confirm-address-1"});}}}}}}}}});}};var personalAddressStep2=function(d){d.preventDefault();$("#addressHolderStep2 div.error").addClass("hidden");var f=$("#addressHolderStep2 :radio:checked");
var a={fname:"M",lname:"Z",email:"mrzip@usps.com",address1:$.trim($("#div-"+f.attr("id")+" span.address1").html()).replace(/<(BR|br)>STE/g," STE"),address2:$.trim($("#div-"+f.attr("id")+" span.address2").html()),city:$.trim($("#div-"+f.attr("id")+" span.city").html()),state:$.trim($("#div-"+f.attr("id")+" span.state").html()),postalcode:$.trim($("#div-"+f.attr("id")+" span.zip").html()),urbancode:$.trim($("#div-"+f.attr("id")+" span.urban").html()),country:$.trim($("#scountry").val()),doNotAMS:false};
if(!$('input[name="address"]:checked').length){$("#step2-ams-radio-required").removeClass("hidden");}else{if(f.attr("id")==="ams-same"){if($("#addressHolderStep2 #for-ams-same span.zip").html()==""){$("#step2-ams-zip-required").removeClass("hidden");}else{$("#ams-verified").val("false");$("#deliverypoint").val("");
a.doNotAMS=true;populateFinalAddressDisplay(a);populateAddressForm(a);progressWizardFinished("addressHolderStep2","addressHolderStep6");$("#step-1-col-1").removeClass("hidden-xs");$("#step-1-col-2").removeClass("col-xs-12").addClass("col-xs-11");$(".eligible").addClass("hidden");$(".ineligible").removeClass("hidden");
setupEligibility(false,false);}}else{if(f.attr("rel")==="true"){rangeCalc(f,"");$("p.a").addClass("hidden");$("p.b").addClass("hidden");$("#ste-range").hasClass("begin")?$("p.b").removeClass("hidden"):$("p.a").removeClass("hidden");$("#verification-returned-addresses").addClass("hidden");$("#verification-returned-addresses-btns").addClass("hidden");
progressWizard("addressHolderStep2","addressHolderStep3");dataLayer.push({"event":"vpvInformedDelivery","virtualPageName":"id-confirm-address-2"});}else{var c=$(this);var b=$("#a-address-step2-prev");if(!c.hasClass("disabled")){$.blockUI();c.addClass("disabled");b.addClass("disabled");amsValidateService(a,function(h){if(h.data.errors){var n="";
for(var g=0;g<h.data.errors.length;g++){n+=('<div class="error">'+h.data.errors[g]+"</div>");}$("#step2-ams-address-error-msg").html(n).removeClass("hidden");c.removeClass("disabled");b.removeClass("disabled");$.unblockUI();}else{if(h.data.fieldErrors){var n="";for(fieldName in h.data.fieldErrors){if(h.data.fieldErrors.hasOwnProperty(fieldName)){var m=$("[name='"+fieldName+"']").attr("id");
$("#form-group-"+m).addClass("has-error");for(var j=0;j<h.data.fieldErrors[fieldName].length;j++){$("#sr-only-error-"+m).text(h.data.fieldErrors[fieldName][j]);n+=('<div class="error">'+h.data.fieldErrors[fieldName][j]+"</div>");}}}c.removeClass("disabled");b.removeClass("disabled");$.unblockUI();}else{if(h.data.rs=="error"){$("#step2-ams-address-error-msg").html(h.data.rsMsg).removeClass("hidden");
c.removeClass("disabled");b.removeClass("disabled");$.unblockUI();}else{if(h.data.amsStatus==UspsEnterpriseReg.EXACT_MATCH){var k={address1:$.trim(h.data.amsAddressList[0].addressLine1),address2:$.trim(h.data.amsAddressList[0].addressLine2),city:$.trim(h.data.amsAddressList[0].city),state:$.trim(h.data.amsAddressList[0].state),postalcode:$.trim(h.data.amsAddressList[0].postalCode),deliverypoint:$.trim(h.data.amsAddressList[0].deliveryPoint),urbancode:$.trim(h.data.amsAddressList[0].urbanizationCode),country:$.trim($("#scountry").val()),doNotAMS:false};
$("#ams-verified").val("true");populateFinalAddressDisplay(k);populateAddressForm(k);progressWizardFinished("addressHolderStep2","addressHolderStep6");$("#confirm-address-title").hide();$("#step-1-col-1").removeClass("hidden-xs");$("#step-1-col-2").removeClass("col-xs-12").addClass("col-xs-11");setupEligibility(h.data.eligibleForInformedDelivery,h.data.eligibleForMYUSPS);
c.removeClass("disabled");b.removeClass("disabled");$.unblockUI();}else{$("#ams-verified").val("false");$("#deliverypoint").val("");populateAddressForm(a);progressWizardFinished("addressHolderStep2","addressHolderStep6");$("span.rmin-qualify").addClass("hidden");$("#step-1-col-1").removeClass("hidden-xs");
$("#step-1-col-2").removeClass("col-xs-12").addClass("col-xs-11");setupEligibility(h.data.eligibleForInformedDelivery,h.data.eligibleForMYUSPS);c.removeClass("disabled");b.removeClass("disabled");$.unblockUI();}}}}});}}}}};var personalAddressStep2Prev=function(a){a.preventDefault();$("#verification-returned-addresses").addClass("hidden");
$("#verification-returned-addresses-btns").addClass("hidden");$("#step2-error-msgs div.step2-error-msg").addClass("hidden");progressWizard("addressHolderStep2","addressHolderStep1");};var personalAddressStep3=function(g){g.preventDefault();$("#addressHolderStep3 div.error").addClass("hidden");var c=($("#ste-range").hasClass("begin"))?($("#ste-range").val()+($("#range-address1").html()).replace(/<(BR|br)>/g," ")):(($("#range-address1").html()).replace(/<(BR|br)>/g," ")+$("#ste-range").val());
var b={fname:"M",lname:"Z",email:"mrzip@usps.com",address1:$.trim(c),address2:$.trim($("#range-address2").html()),city:$.trim($("#range-city").html()),state:$.trim($("#range-state").html()),postalcode:$.trim($("#range-zip").html()),urbancode:$.trim($("#range-urban").html()),country:$.trim($("#scountry").val()),doNotAMS:false};
var f=$(this);var d=$("#a-address-step3-prev");if(!f.hasClass("disabled")){$.blockUI();f.addClass("disabled");d.addClass("disabled");amsValidateService(b,function(h){if(h.data.errors){var n="";for(var a=0;a<h.data.errors.length;a++){n+=('<div class="error">'+h.data.errors[a]+"</div>");}$("#step3-ams-address-error-msg").html(n).removeClass("hidden");
f.removeClass("disabled");d.removeClass("disabled");$.unblockUI();}else{if(h.data.fieldErrors){var n="";for(fieldName in h.data.fieldErrors){if(h.data.fieldErrors.hasOwnProperty(fieldName)){var m=$("[name='"+fieldName+"']").attr("id");$("#form-group-"+m).addClass("has-error");for(var j=0;j<h.data.fieldErrors[fieldName].length;
j++){$("#sr-only-error-"+m).text(h.data.fieldErrors[fieldName][j]);n+=('<div class="error">'+h.data.fieldErrors[fieldName][j]+"</div>");}}}f.removeClass("disabled");d.removeClass("disabled");$.unblockUI();}else{if(h.data.rs=="error"){$("#step3-ams-address-error-msg").html(h.data.rsMsg).removeClass("hidden");
f.removeClass("disabled");d.removeClass("disabled");$.unblockUI();}else{if(h.data.amsStatus==UspsEnterpriseReg.EXACT_MATCH){var k={address1:$.trim(h.data.amsAddressList[0].addressLine1),address2:$.trim(h.data.amsAddressList[0].addressLine2),city:$.trim(h.data.amsAddressList[0].city),state:$.trim(h.data.amsAddressList[0].state),postalcode:$.trim(h.data.amsAddressList[0].postalCode),deliverypoint:$.trim(h.data.amsAddressList[0].deliveryPoint),urbancode:$.trim(h.data.amsAddressList[0].urbanizationCode),country:$.trim($("#scountry").val()),doNotAMS:false};
$("#ams-verified").val("true");populateFinalAddressDisplay(k);populateAddressForm(k);progressWizardFinished("addressHolderStep3","addressHolderStep6");$("#confirm-address-title").hide();$("#step-1-col-1").removeClass("hidden-xs");$("#step-1-col-2").removeClass("col-xs-12").addClass("col-xs-11");setupEligibility(h.data.eligibleForInformedDelivery,h.data.eligibleForMYUSPS);
f.removeClass("disabled");d.removeClass("disabled");$.unblockUI();}else{$("#ams-verified").val("false");$("#deliverypoint").val("");populateAddressForm(b);progressWizardFinished("addressHolderStep3","addressHolderStep6");$("#step-1-col-1").removeClass("hidden-xs");$("#step-1-col-2").removeClass("col-xs-12").addClass("col-xs-11");
setupEligibility(h.data.eligibleForInformedDelivery,h.data.eligibleForMYUSPS);f.removeClass("disabled");d.removeClass("disabled");$.unblockUI();}}}}});}};var personalAddressStep3Prev=function(a){a.preventDefault();$("#addressHolderStep3 div.error").addClass("hidden");$("#verification-returned-addresses").removeClass("hidden");
$("#verification-returned-addresses-btns").removeClass("hidden");progressWizard("addressHolderStep3","addressHolderStep2");};var personalAddressStep6Prev=function(a){a.preventDefault();$("#confirm-address-title").show();$("#step-1-col-1").addClass("hidden-xs");$("#step-1-col-2").removeClass("col-xs-11").addClass("col-xs-12");
$(".eligible").addClass("hidden");$(".ineligible").addClass("hidden");progressWizard("addressHolderStep6","addressHolderStep1");};var businessAddressStep1=function(b){b.preventDefault();var a=$(this);if(!a.hasClass("disabled")){$("#addressHolderStep1 div.form-group").removeClass("has-error");$("#addressHolderStep1 span[id^='error-']").empty();
$("#addressHolderStep1 span[id^='sr-only-error-']").empty();addressObj={scountry:$.trim($("#scountry").val()),tcompany:$.trim($("#tcompany").val()),taddress:$.trim($("#taddress").val()),tapt:$.trim($("#tapt").val()),tcity:$.trim($("#tcity").val()),sstate:$.trim($("#sstate").val()),tzip:$.trim($("#tzip").val()),turbancode:$.trim($("#turbanCode").val()),taddress1:$.trim($("#taddress1").val()),taddress2:$.trim($("#taddress2").val()),taddress3:$.trim($("#taddress3").val()),tcityInt:$.trim($("#tcityInt").val()),tprovince:$.trim($("#tprovince").val()),tpostalCode:$.trim($("#tpostalCode").val()),accountType:"business"};
$.blockUI();a.addClass("disabled");validateAddressService(addressObj,function(c,f){if(c.data.fieldErrors){for(fieldName in c.data.fieldErrors){if(c.data.fieldErrors.hasOwnProperty(fieldName)){var h=$("[name='"+fieldName+"']").attr("id");$("#form-group-"+h).addClass("has-error");$("#"+h).attr("aria-invalid","true");
for(var d=0;d<c.data.fieldErrors[fieldName].length;d++){$("#sr-only-error-"+h).text(c.data.fieldErrors[fieldName][d]);$("#error-"+h).append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(c.data.fieldErrors[fieldName][d])+"</span>");
}}}$("#addressHolderStep1 div.form-group.has-error:first").find("input[type=text],textarea,select").filter(":visible:first").focus();a.removeClass("disabled");$.unblockUI();}else{if($("#scountry").val()==UspsEnterpriseReg.UNITED_STATES){companyMatchAddressObj={company:f.tcompany,address1:f.taddress,address2:f.tapt,address3:"",city:f.tcity,state:f.sstate,urbancode:f.turbancode,postalcode:f.tzip,country:f.scountry};
}else{companyMatchAddressObj={company:f.tcompany,address1:f.taddress1,address2:f.taddress2,address3:f.taddress3,city:f.tcityInt,state:f.tprovince,urbancode:"",postalcode:f.tpostalCode,country:f.scountry};}var g=($("#companyMatch")&&$("#companyMatch").val()=="false")?false:true;matchingCompanyLookupService(companyMatchAddressObj,g,"",function(k){if(k.data.errors){var q="";
for(var j=0;j<k.data.errors.length;j++){q+=('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+k.data.errors[j]+"</span>");}$("#step1-ams-address-error-msg").html(q).removeClass("hidden");a.removeClass("disabled");$.unblockUI();}else{if(k.data.fieldErrors){for(fieldName in k.data.fieldErrors){if(k.data.fieldErrors.hasOwnProperty(fieldName)){var p=$("[name='"+fieldName+"']").attr("id");
$("#form-group-"+p).addClass("has-error");$("#"+p).attr("aria-invalid","true");for(var n=0;n<k.data.fieldErrors[fieldName].length;n++){$("#sr-only-error-"+p).text(k.data.fieldErrors[fieldName][n]);$("#error-"+p).append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(k.data.fieldErrors[fieldName][n])+"</span>");
}}}$("#addressHolderStep1 div.form-group.has-error:first").find("input[type=text],textarea,select").filter(":visible:first").focus();a.removeClass("disabled");$.unblockUI();}else{if(k.data.rs=="error"){$("#step1-ams-address-error-msg").html('<!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+k.data.rsMsg).removeClass("hidden");
a.removeClass("disabled");$.unblockUI();}else{if(k.data.amsStatus==UspsEnterpriseReg.INVALID_ADDRESS){$("#form-group-taddress").addClass("has-error");$("#taddress").attr("aria-invalid","true");$("#sr-only-error-taddress").text(sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_ADDRESS_MSG));$("#error-taddress").append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_ADDRESS_MSG)+"</span>");
a.removeClass("disabled");$.unblockUI();}else{if(k.data.amsStatus==UspsEnterpriseReg.INVALID_CITY){$("#form-group-tcity").addClass("has-error");$("#tcity").attr("aria-invalid","true");$("#sr-only-error-tcity").text(sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_CITY_MSG));$("#error-tcity").append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_CITY_MSG)+"</span>");
a.removeClass("disabled");$.unblockUI();}else{if(k.data.amsStatus==UspsEnterpriseReg.INVALID_STATE){$("#form-group-sstate").addClass("has-error");$("#sstate").attr("aria-invalid","true");$("#sr-only-error-sstate").text(sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_STATE_MSG));$("#error-sstate").append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_STATE_MSG)+"</span>");
a.removeClass("disabled");$.unblockUI();}else{if(k.data.amsStatus==UspsEnterpriseReg.INVALID_ZIPCODE){$("#form-group-tzip").addClass("has-error");$("#tzip").attr("aria-invalid","true");$("#sr-only-error-tzip").text(sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_ZIPCODE_MSG));$("#error-tzip").append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(UspsEnterpriseReg.errorMsgs.INVALID_ZIPCODE_MSG)+"</span>");
a.removeClass("disabled");$.unblockUI();}else{if(k.data.amsStatus==UspsEnterpriseReg.EXACT_MATCH){var o={company:$.trim($("#tcompany").val()),address1:$.trim(k.data.amsAddressList[0].addressLine1),address2:$.trim(k.data.amsAddressList[0].addressLine2),city:$.trim(k.data.amsAddressList[0].city),state:$.trim(k.data.amsAddressList[0].state),postalcode:$.trim(k.data.amsAddressList[0].postalCode),urbancode:$.trim(k.data.amsAddressList[0].urbanizationCode),country:$.trim($("#scountry").val()),doNotAMS:false};
$("#ams-verified").val("true");populateFinalAddressDisplay(o);populateAddressForm(o);if(k.data.rs==UspsEnterpriseReg.COMPANY_MATCH_FOUND){setupStepCompanyMatch(k.data,o);progressWizard("addressHolderStep1","addressHolderStep4");updateViewport("returnedMatchedAddresses","returned-matched-addresses-scrollbar");
}else{if(k.data.rs==UspsEnterpriseReg.EQUIFAX_SIMILARS){setupStepEfxSimilars(k.data);progressWizard("addressHolderStep1","addressHolderStep5");updateViewport("returnedEquifaxAddresses","returned-equifax-addresses-scrollbar");}else{if(k.data.rs==UspsEnterpriseReg.ERROR){$("#step1-ams-address-error-msg").html('<!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->There was an error while processing your address.  Please try again.').removeClass("hidden");
}else{$("#company-crid").val(k.data.crid);progressWizardFinished("addressHolderStep1","addressHolderStep6");}}}a.removeClass("disabled");$.unblockUI();}else{if(k.data.rs==UspsEnterpriseReg.COMPANY_MATCH_FOUND){setupStepCompanyMatch(data,amsAddressObj);progressWizard("addressHolderStep1","addressHolderStep4");
updateViewport("returnedMatchedAddresses","returned-matched-addresses-scrollbar");}else{if(k.data.rs==UspsEnterpriseReg.EQUIFAX_SIMILARS){setupStepEfxSimilars(k.data);populateFinalAddressDisplay(amsAddressObj);progressWizard("addressHolderStep1","addressHolderStep5");updateViewport("returnedEquifaxAddresses","returned-equifax-addresses-scrollbar");
}else{if(k.data.rs==UspsEnterpriseReg.ERROR){$("#a-address-step1-error-msg").html("There was an error while processing your address.  Please try again.").removeClass("hide");}else{if(k.data.rs==UspsEnterpriseReg.COMPANY_ADDED){$("#company-crid").val(data.crid);populateFinalAddressDisplay(amsAddressObj);
progressWizardFinished("addressHolderStep1","addressHolderStep6");}else{$("#ams-verified").val("false");$("#deliverypoint").val("");if(k.data.amsStatus=="ADDRESS NOT FOUND"||k.data.amsAddressList.length<1){$("#addressHolderStep2 .found").addClass("hidden");$("#addressHolderStep2 .not-found").removeClass("hidden");
}else{$("#addressHolderStep2 .found").removeClass("hidden");$("#addressHolderStep2 .not-found").addClass("hidden");}$("#for-ams-same span.urban").html(k.data.urban);$("#for-ams-same span.address1").html(k.data.address);$("#for-ams-same span.address2").html(k.data.apt);$("#for-ams-same span.city").html(k.data.city);
$("#for-ams-same span.state").html(k.data.state);$("#for-ams-same span.zip").html(k.data.zip);var m=[];var n=0;$.each(k.data.amsAddressList,function(){n++;var i="false";if((/\(range/i.test(this.addressLine1))||(/\(even range/i.test(this.addressLine1))||(/\(odd range/i.test(this.addressLine1))){i="true";
}m.push('<div id="div-address'+n+'" class="radio">','<label for="address'+n+'">','<input type="radio" id="address'+n+'" name="address" rel="'+i+'" />','<span class="urban">'+((this.urbanizationCode!=null)?this.urbanizationCode:"")+"</span>",'<span class="address1">'+this.addressLine1.replace(/\sSTE\s/g,"<br>STE ")+"</span>",'<span class="address2">'+(this.addressLine2!=null)?this.addressLine2:""+"</span>",'<span class="city">'+this.city+'</span> <span class="state">'+this.state+'</span> <span class="zip">'+this.postalCode+"</span>","</label>","</div>");
});$("#returnedAddresses").html(m.join(""));$("#returnedAddresses :radio:first").attr("checked",true);progressWizard("addressHolderStep1","addressHolderStep2");$("#verification-returned-addresses").removeClass("hidden");$("#verification-returned-addresses-btns").removeClass("hidden");updateViewport("returnedAddresses","returned-addresses-scrollbar");
a.removeClass("disabled");$.unblockUI();dataLayer.push({"event":"vpvInformedDelivery","virtualPageName":"id-confirm-address-1"});}}}}}}}}}}}}});}});}};var businessAddressStep2=function(f){f.preventDefault();$("#addressHolderStep2 div.error-txt").addClass("hidden");var g=$("#addressHolderStep2 :radio:checked");
var a={company:$.trim($("#tcompany").val()),address1:$.trim($("#div-"+g.attr("id")+" span.address1").html()).replace(/<(BR|br)>STE/g," STE"),address2:$.trim($("#div-"+g.attr("id")+" span.address2").html()),address3:"",city:$.trim($("#div-"+g.attr("id")+" span.city").html()),state:$.trim($("#div-"+g.attr("id")+" span.state").html()),postalcode:$.trim($("#div-"+g.attr("id")+" span.zip").html()),urbancode:$.trim($("#div-"+g.attr("id")+" span.urban").html()),country:$.trim($("#scountry").val()),doNotAMS:false};
if(!$('input[name="address"]:checked').length){$("#step2-ams-radio-required").removeClass("hidden");}else{if(a.postalcode.length<1){$("#step2-ams-zip-required").removeClass("hidden");}else{if(g.attr("rel")==="true"){rangeCalc(g,"");$("p.a").addClass("hidden");$("p.b").addClass("hidden");$("#ste-range").hasClass("begin")?$("p.b").removeClass("hidden"):$("p.a").removeClass("hidden");
progressWizard("addressHolderStep2","addressHolderStep3");dataLayer.push({"event":"vpvInformedDelivery","virtualPageName":"id-confirm-address-2"});}else{var d=($("#companyMatch")&&$("#companyMatch").val()=="false")?false:true;var c=$(this);var b=$("#a-address-step2-prev");if(!c.hasClass("disabled")){$.blockUI();
c.addClass("disabled");b.addClass("disabled");if(g.attr("id")==="ams-same"){$("#ams-verified").val("false");$("#deliverypoint").val("");a.doNotAMS=true;populateFinalAddressDisplay(a);populateAddressForm(a);companiesSimilarService(a,d,$("#hcrid").val(),function(h){if(h.rs==UspsEnterpriseReg.COMPANY_MATCH_FOUND){setupStepCompanyMatch(h.data,a);
progressWizard("addressHolderStep2","addressHolderStep4");updateViewport("returnedMatchedAddresses","returned-matched-addresses-scrollbar");}else{if(h.rs==UspsEnterpriseReg.EQUIFAX_SIMILARS){setupStepEfxSimilars(h.data);progressWizard("addressHolderStep2","addressHolderStep5");updateViewport("returnedEquifaxAddresses","returned-equifax-addresses-scrollbar");
}else{if(h.rs==UspsEnterpriseReg.ERROR){$("#a-address-step2-error-msg").html('<!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->There was an error while processing your address.  Please try again.').removeClass("hidden");}else{$("#company-crid").val(h.data.crid);progressWizardFinished("addressHolderStep2","addressHolderStep6");
}}}$.unblockUI();c.removeClass("disabled");b.removeClass("disabled");});}else{amsValidateLookupService(a,function(h){if(h.rs==UspsEnterpriseReg.EXACT_MATCH){$("#ams-verified").val("true");}else{$("#ams-verified").val("false");a.doNotAMS=true;}populateFinalAddressDisplay(a);populateAddressForm(a);companiesSimilarService(a,d,$("#hcrid").val(),function(i){if(i.rs==UspsEnterpriseReg.COMPANY_MATCH_FOUND){setupStepCompanyMatch(i.data,a);
progressWizard("addressHolderStep2","addressHolderStep4");updateViewport("returnedMatchedAddresses","returned-matched-addresses-scrollbar");}else{if(i.rs==UspsEnterpriseReg.EQUIFAX_SIMILARS){setupStepEfxSimilars(i.data);progressWizard("addressHolderStep2","addressHolderStep5");updateViewport("returnedEquifaxAddresses","returned-equifax-addresses-scrollbar");
}else{if(i.rs==UspsEnterpriseReg.ERROR){$("#a-address-step2-error-msg").html("There was an error while processing your address.  Please try again.").removeClass("hide");}else{$("#company-crid").val(i.data.crid);progressWizardFinished("addressHolderStep2","addressHolderStep6");}}}$.unblockUI();c.removeClass("disabled");
b.removeClass("disabled");});});}}}}}};var businessAddressStep2Prev=function(a){a.preventDefault();$('input[name="address"]').prop("checked",false);$("#verification-returned-addresses").addClass("hidden");$("#verification-returned-addresses-btns").addClass("hidden");$("#addressHolderStep2 div.error-txt").addClass("hidden");
progressWizard("addressHolderStep2","addressHolderStep1");};var businessAddressStep3=function(g){g.preventDefault();$("#addressHolderStep3 div.error-txt").addClass("hidden");var c=($("#ste-range").hasClass("begin"))?($("#ste-range").val()+($("#range-address1").html()).replace(/<(BR|br)>/g," ")):(($("#range-address1").html()).replace(/<(BR|br)>/g," ")+$("#ste-range").val());
var b={address1:$.trim(c),address2:$.trim($("#range-address2").html()),address3:"",city:$.trim($("#range-city").html()),state:$.trim($("#range-state").html()),postalcode:$.trim($("#range-zip").html()),urbancode:$.trim($("#range-urban").html()),country:$.trim($("#scountry").val()),doNotAMS:false};var f=$(this);
var d=$("#a-address-step3-prev");if(!f.hasClass("disabled")){$.blockUI();f.addClass("disabled");d.addClass("disabled");amsLookupService(b,function(h){var m=($("#companyMatch")&&$("#companyMatch").val()=="false")?false:true;var k;if(h.data.errors){var o="";for(var a=0;a<h.data.errors.length;a++){o+=('<div class="error">'+h.data.errors[a]+"</div>");
}$("#step3-ams-address-error-msg").html(o).removeClass("hidden");f.removeClass("disabled");d.removeClass("disabled");$.unblockUI();}else{if(h.data.fieldErrors){var o="";for(fieldName in h.data.fieldErrors){if(h.data.fieldErrors.hasOwnProperty(fieldName)){var n=$("[name='"+fieldName+"']").attr("id");$("#form-group-"+n).addClass("has-error");
for(var j=0;j<h.data.fieldErrors[fieldName].length;j++){$("#sr-only-error-"+n).text(h.data.fieldErrors[fieldName][j]);o+=('<div class="error">'+h.data.fieldErrors[fieldName][j]+"</div>");}}}f.removeClass("disabled");d.removeClass("disabled");$.unblockUI();}else{if(h.data.rs=="error"){$("#step3-ams-address-error-msg").html(h.data.rsMsg).removeClass("hidden");
f.removeClass("disabled");d.removeClass("disabled");$.unblockUI();}else{if(h.data.amsStatus==UspsEnterpriseReg.EXACT_MATCH){k={company:$.trim($("#tcompany").val()),address1:$.trim(h.data.amsAddressList[0].addressLine1),address2:$.trim(h.data.amsAddressList[0].addressLine2),city:$.trim(h.data.amsAddressList[0].city),state:$.trim(h.data.amsAddressList[0].state),postalcode:$.trim(h.data.amsAddressList[0].postalCode),urbancode:$.trim(h.data.amsAddressList[0].urbanizationCode),country:$.trim($("#scountry").val()),doNotAMS:false};
$("#ams-verified").val("true");}else{k={company:$.trim($("#tcompany").val()),address1:$.trim(h.data.address),address2:$.trim(h.data.apt),city:$.trim(h.data.city),state:$.trim(h.data.state),postalcode:$.trim(h.data.zip),urbancode:$.trim(h.data.urban),country:$.trim($("#scountry").val()),doNotAMS:false};
$("#ams-verified").val("false");k.doNotAMS=true;}populateFinalAddressDisplay(k);populateAddressForm(k);companiesSimilarService(k,m,$("#hcrid").val(),function(i){if(i.data.rs==UspsEnterpriseReg.COMPANY_MATCH_FOUND){setupStepCompanyMatch(i.data,k);progressWizard("addressHolderStep3","addressHolderStep4");
updateViewport("returnedMatchedAddresses","returned-matched-addresses-scrollbar");}else{if(i.data.rs==UspsEnterpriseReg.EQUIFAX_SIMILARS){setupStepEfxSimilars(i.data);progressWizard("addressHolderStep3","addressHolderStep5");updateViewport("returnedEquifaxAddresses","returned-equifax-addresses-scrollbar");
}else{if(i.data.rs==UspsEnterpriseReg.ERROR){$("#a-address-step3-error-msg").html("There was an error while processing your address.  Please try again.").removeClass("hidden");}else{$("#company-crid").val(i.data.crid);progressWizardFinished("addressHolderStep3","addressHolderStep6");}}}$.unblockUI();
f.removeClass("disabled");d.removeClass("disabled");});}}}});}};var businessAddressStep3Prev=function(a){a.preventDefault();$("#a-address-step3-error-msg").addClass("hidden");progressWizard("addressHolderStep3","addressHolderStep2");};var businessAddressStep4=function(i){i.preventDefault();$("#addressHolderStep4 div.error-txt").addClass("hidden");
var a=$(this);var j=$("#a-address-step4-prev");if(!a.hasClass("disabled")){if(!$('input[name="company-match-address"]:checked').length){$("#step4-ams-radio-required").removeClass("hidden");}else{$.blockUI();a.addClass("disabled");j.addClass("disabled");var h=$("input[name=company-match-address]:radio:checked");
if(h.val()=="same"){var g;if($("#scountry").val()==UspsEnterpriseReg.UNITED_STATES){var b=($("#ams-verified").val()=="true")?false:true;g={company:$.trim($("#tcompany").val()),address1:$.trim($("#taddress").val()),address2:$.trim($("#tapt").val()),address3:"",city:$.trim($("#tcity").val()),state:$.trim($("#sstate").val()),postalcode:$.trim($("#tzip").val()),urbancode:$.trim($("#turbanCode").val()),country:$("#scountry").val(),doNotAMS:b};
}else{g={company:$.trim($("#tcompany").val()),address1:$.trim($("#taddress1").val()),address2:$.trim($("#taddress2").val()),address3:$.trim($("#taddress3").val()),city:$.trim($("#tcityInt").val()),state:$.trim($("#tprovince").val()),postalcode:$.trim($("#tpostalCode").val()),urbancode:"",country:$("#scountry").val(),doNotAMS:true};
}populateFinalAddressDisplay(g);addCompanyService(g,function(c){if(c.rs==UspsEnterpriseReg.EQUIFAX_SIMILARS){setupStepEfxSimilars(c.data);progressWizard("addressHolderStep4","addressHolderStep5");updateViewport("returnedEquifaxAddresses","returned-equifax-addresses-scrollbar");}else{if(c.rs=="ENTREG-DUPLICATE-EXCEPTION"){$("#company-crid").val(c.data.crid);
progressWizardFinished("addressHolderStep4","addressHolderStep6");}else{if(c.rs==UspsEnterpriseReg.ERROR){$("#rsMsg-error-msg-step4").html("There was an error while processing your address.  Please try again.");$("#step4-ams-address-error-msg").removeClass("hidden");}else{$("#company-crid").val(c.data.crid);
progressWizardFinished("addressHolderStep4","addressHolderStep6");}}}$.unblockUI();a.removeClass("disabled");j.removeClass("disabled");});}else{a.removeClass("disabled");j.removeClass("disabled");$.unblockUI();var k=$.trim($("#div-"+h.attr("id")+" span.country").html());var f=k==""?UspsEnterpriseReg.UNITED_STATES:k;
var d={company:$.trim($("#div-"+h.attr("id")+" span.company").html()),address1:$.trim($("#div-"+h.attr("id")+" span.address1").html()),address2:$.trim($("#div-"+h.attr("id")+" span.address2").html()),city:$.trim($("#div-"+h.attr("id")+" span.city").html()),state:$.trim($("#div-"+h.attr("id")+" span.state").html()),postalcode:$.trim($("#div-"+h.attr("id")+" span.zip").html()),urbancode:$.trim($("#div-"+h.attr("id")+" span.urban").html()),country:f,doNotAMS:false};
populateFinalAddressDisplay(d);d.country=$("#scountry").val();populateAddressForm(d);$("#company-crid").val(h.val());progressWizardFinished("addressHolderStep4","addressHolderStep6");}}}};var businessAddressStep4Prev=function(a){a.preventDefault();$("#addressHolderStep4 div.error-txt").addClass("hidden");
$('input[name="company-match-address"]').prop("checked",false);progressWizard("addressHolderStep4","addressHolderStep1");};var businessAddressStep5=function(b){b.preventDefault();var a=$(this);if(!a.hasClass("disabled")){$("#addressHolderStep5 div.error-txt").addClass("hidden");if(!$('input[name="similar-address"]:checked').length){$("#step5-ams-radio-required").removeClass("hidden");
}else{$.blockUI();a.addClass("disabled");eFXSimilarService($("#company-crid").val(),$("#group-ref-id").val(),$('input[name="similar-address"]:radio:checked').val(),function(c){progressWizardFinished("addressHolderStep5","addressHolderStep6");a.removeClass("disabled");$.unblockUI();});}}};var businessAddressStep6Prev=function(a){a.preventDefault();
$("#id-proof-btn-row").hide();progressWizard("addressHolderStep6","addressHolderStep1");};var securityQuestion=function(){var b=$(this).attr("id");var f=parseInt($(this).val());var a=$(this).attr("rel");$("#form-group-"+b).removeClass("has-error");$("#error-"+b).empty();$("#sr-only-error-"+b).empty();
var d=$("#ssec3").clone();$(this).find("option[value='']").prop("disabled","disabled");var c=$("#ssec"+a+"").val();$("#ssec"+a+"").html(d.html());$("#ssec"+a+" option[value='']").html((a==1)?"Select your first security question":"Select your second security question");if($.isNumeric(f)){$("#ssec"+a+"").find("option[value="+f+"]").remove();
}$("#ssec"+a+"").val(c);if(c!=""){$("#ssec"+a+"").find("option[value='']").prop("disabled","disabled");}};var showCompany=function(){if($("input[name=raccount]:radio:checked").val()==="business"){$("#address-type").empty().text("business");$("#cFrmUSPS").prop("checked",true);$("#cFrmPartners").prop("checked",true);
addressWizardBusinessSetup();}else{$("#address-type").empty().text("home");$("#cFrmUSPS").prop("checked",false);$("#cFrmPartners").prop("checked",false);addressWizardPersonalSetup();}$("#address-section").fadeIn();$("#contact-section").fadeIn();$("#scountry").prop("selectedIndex",0);$("#privacy-policy-section").hide();
resetLookupPanels();};var checkEmail=function(){$.ajax({url:"/entreg/EmailValidationAction",cache:false,type:"post",data:{email:$("#temail").val()}}).done(function(a){$("#result-temail").empty().hide().html(a).fadeIn();$("#emailNameSuggestion").on("click",function(b){b.preventDefault();$("#temail").val($(this).data("email-name"));
$("#result-temail").fadeOut("fast");$("#temail").focus();});}).always(function(){}).fail(function(){});};var sReg=function(){var a=encodeURIComponent($("#hRefUrl").val());$.ajax({url:"/entreg/RegistrationStartAction",cache:false,type:"post",dataType:"json",data:{key1:a,key2:"ID_REG_PAGE"}}).done(function(b){$("#hRegS").val(b.rS);
}).always(function(){}).fail(function(){$("#error-response").html("Data posted with Errors");});};$(document).ready(function(){dataLayer.push({"event":"vpvInformedDelivery","virtualPageName":"id-verify-address"});$("form").keypress(function(b){if(b.which==13){b.preventDefault();return false;}});$(function(){$('[data-toggle="popover"]').popover({container:"body",trigger:"focus hover",placement:"top",html:true,content:popoverContent});
});$("#slanguage").change(function(f){f.preventDefault();var c=document.location.hostname;var b=c.indexOf("-")==-1?"en":c.slice(0,c.indexOf("-"));var d=$(this).val();if(d!=b){$("#lang").val(d);$("#header-language-form").submit();}});$("#taddress").on("keypress",function(b){sReg();$(this).off("keypress");
});var a={content:"",placement:"top",trigger:"manual",html:true,"template":'<div class="popover popover-danger" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>'};$("#tuserName").popover(a);$("#tuserName").on("focusin",function(b){if($("#form-group-tuserName").hasClass("has-error")||$("#form-group-tuserName").hasClass("trigger")){$("#form-group-tuserName").removeClass("trigger");
var c={};c["fieldToValidate"]=$(this).attr("name");c[$(this).attr("name")]=$(this).val();validateFieldMapJSON(c,false,function(d){if(d.status!="success"){var f=[];$.each(d.errors,function(h,g){if(g.hasOwnProperty("field")){$("#form-group-"+escapeElementId(g.field)).addClass("has-error");$("#"+escapeElementId(g.field)).attr("aria-invalid","true");
$("#sr-only-error-"+escapeElementId(g.field)).empty().append(sanitizeHtmlOut(g.message));$("#error-"+escapeElementId(g.field)).empty().append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(g.message)+"</span>");}else{if(showIcon=="true"){f.push('<div class="error-txt"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(g.message)+"</div>");
}else{f.push('<div class="error-txt">'+sanitizeHtmlOut(g.message)+"</div>");}}});}else{validateAlias($("#tuserName").val(),function(g,k){if(g=="alternate"){var h=[];var j=0;h.push('<div id="alternate-alias" class="well well-lg">Need to <a href="/login"><strong>sign in</strong></a>?<hr>Try another username or choose one of our suggestions.');
$.each(k,function(){j++;h.push('<div class="radio">',"<label>",'<input type="radio" name="roptUn" id="roptUn'+j+'" value="'+this+'">',this,"</label>","</div>");});h.push("</div>");$("#form-group-tuserName").addClass("has-error");$("#error-tuserName").html('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->Looks like that name is already in use.</span>');
$("#check-username-response").html(h.join(""));$("#check-username-response-m").html(h.join(""));}else{if(g=="success"){$("#form-group-tuserName").removeClass("has-error");$("#check-username-available").css("display","block");}else{$("#form-group-tuserName").addClass("has-error");$("#check-username-response").html(g);
$("#check-username-response-m").html(g);}}});}});}}).on("focusout",function(){$("#check-username-response").empty();$("#check-username-response-m").empty();var b={};b["fieldToValidate"]=$(this).attr("name");b[$(this).attr("name")]=$(this).val();b["required"]=true;validateFieldMapJSON(b,false,function(c){if(c.status!="success"){var d=[];
$.each(c.errors,function(g,f){if(f.hasOwnProperty("field")){$("#form-group-"+escapeElementId(f.field)).addClass("has-error");$("#"+escapeElementId(f.field)).attr("aria-invalid","true");$("#sr-only-error-"+escapeElementId(f.field)).empty().append(sanitizeHtmlOut(f.message));$("#error-"+escapeElementId(f.field)).empty().append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(f.message)+"</span>");
}else{if(showIcon=="true"){d.push('<div class="error-txt"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(f.message)+"</div>");}else{d.push('<div class="error-txt">'+sanitizeHtmlOut(f.message)+"</div>");}}});}else{validateAlias($("#tuserName").val(),function(f,j){if(f=="alternate"){var g=[];
var h=0;g.push('<p>Try another name or choose one of our suggestions:</p><div id="alternate-alias">');$.each(j,function(){h++;g.push('<div class="radio">',"<label>",'<input type="radio" name="roptUn" id="roptUn'+h+'" value="'+this+'">',this,"</label>","</div>");});g.push("</div>");$("#form-group-tuserName").addClass("has-error");
$("#error-tuserName").html('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->Looks like this username is already in use.</span>');$("#check-username-response").html(g.join(""));$("#check-username-response-m").html(g.join(""));}else{if(f=="success"){$("#form-group-tuserName").removeClass("has-error");
$("#check-username-available").css("display","block");}else{$("#form-group-tuserName").addClass("has-error");$("#check-username-response").html(f);$("#check-username-response-m").html(f);}}});}});}).on("keyup",function(){$("#check-username-available").css("display","none");if($("#form-group-tuserName").hasClass("has-error")){$("#form-group-tuserName").removeClass("has-error");
$("#error-tuserName").empty();$("#tuserName").removeAttr("aria-invalid");$("#sr-only-error-tuserName").empty();}});$("#tPassword").on("keydown",function(){$("#form-group-tPassword").removeClass("has-error");}).on("keyup",function(b){b.stopImmediatePropagation();ValidatePasswordv3($(this));}).on("focus",function(){ValidatePasswordv3($(this));
$("#password-hints").fadeIn("fast");$("#password-hints-m").fadeIn("fast");}).on("blur",function(){if($("#tPassword").val()==""){$("#form-group-tPassword").addClass("has-error");}else{var b={};b["fieldToValidate"]=$(this).attr("name");b[$(this).attr("name")]=$(this).val();validateFieldMapJSON(b,false,function(c){if(c.status!="success"){$("#form-group-tPassword").addClass("has-error");
}});}}).on("focusout",function(){passwordRetypeField=$("#tPasswordRetype");pwd2=passwordRetypeField.val();if(($(this).val().length>0)&&(pwd2.length==0)){}else{if($(this).val().length==0){}else{if($(this).val()==pwd2){$("#form-group-tPassword").removeClass("has-error");}else{$("#form-group-tPassword").addClass("has-error");
}}}});$("#tPasswordRetype").on("keydown",function(){$("#form-group-tPasswordRetype").removeClass("has-error");}).on("keyup",function(b){b.stopImmediatePropagation();ValidateRetypePasswordv3($(this),$("#tPassword"));}).on("focus",function(){ValidateRetypePasswordv3($(this),$("#tPassword"));}).on("blur",function(){}).on("focusout",function(){$("#retype_pswd_info_invalid").hide();
$("#retype_pswd_info_matching").hide();$("#retype_pswd_info_matching_progress").hide();$("#retype_pswd_info_match").hide();$("#retype_pswd_info_begin").hide();pwd2=$("#tPasswordRetype").val();if($("#form-group-tPassword").hasClass("has-error")||pwd2.length==0){$("#form-group-tPasswordRetype").addClass("has-error");
}else{if($("#tPassword").val()==pwd2){$("#form-group-tPasswordRetype").removeClass("has-error");}else{$("#form-group-tPasswordRetype").addClass("has-error");}}});$("#returned-addresses-scrollbar").tinyscrollbar();$("#returned-matched-addresses-scrollbar").tinyscrollbar();$("#returned-equifax-addresses-scrollbar").tinyscrollbar();
$("#possible-aliases-scrollbar").tinyscrollbar();countrySwap();urbanization();$("#scountry").change(function(){countrySwap();});$("#sstate").change(function(){urbanization();});$.validateField({field:"#tcompany",fields:["#tcompany","#rAccount2"]});$.validateField({field:"#taddress",fields:["#taddress"],icon:"false"});
$.validateField({field:"#tapt",fields:["#tapt"],icon:"false"});$.validateField({field:"#tcity",fields:["#tcity"],icon:"false"});$("#sstate").on("change",function(){$("#form-group-sstate").removeClass("has-error");$("#sstate").removeAttr("aria-invalid");$("#error-sstate").empty();$("#sr-only-error-sstate").empty();
}).on("focusout",function(){if($(this).val()==""){$("#form-group-sstate").addClass("has-error");$("#sstate").attr("aria-invalid","true");$("#sr-only-error-sstate").text(sanitizeHtmlOut("State is required."));$("#error-sstate").empty().append('<span class="error-txt-blk">'+sanitizeHtmlOut("State is required.")+"</span>");
}});$.validateField({field:"#tzip",fields:["#tzip"],icon:"false"});$.validateField({field:"#taddress1",fields:["#taddress1"],icon:"false"});$.validateField({field:"#taddress2",fields:["#taddress2"],icon:"false"});$.validateField({field:"#taddress3",fields:["#taddress3"],icon:"false"});$.validateField({field:"#tcityInt",fields:["#tcityInt"],icon:"false"});
$.validateField({field:"#tprovince",fields:["#tprovince"],icon:"false"});$.validateField({field:"#tpostalCode",fields:["#tpostalCode"],icon:"false"});$.validateField({field:"#tfName",fields:["#tfName"],icon:"false"});$.validateField({field:"#tmI",fields:["#tmI"],icon:false});$.validateField({field:"#tlName",fields:["#tlName"],icon:"false"});
$.validateField({field:"#tsecAnswer1",fields:["#tsecAnswer1","#ssec1"],icon:"false"});$.validateField({field:"#tsecAnswer1Match",fields:["#tsecAnswer1Match","#tsecAnswer1"],icon:"false"});$.validateField({field:"#tsecAnswer2",fields:["#tsecAnswer2","#ssec2"],icon:"false"});$.validateField({field:"#tsecAnswer2Match",fields:["#tsecAnswer2Match","#tsecAnswer2"],icon:"false"});
$("#ssec1").change(securityQuestion);$("#ssec2").change(securityQuestion);$.validateField({field:"#tphone",fields:["#tphone","#sphoneType"],icon:false});$("#temail").on("keyup",function(b){if($("#temailRetype").val()!=""){$("#form-group-temailRetype").removeClass("has-error");$("#error-temailRetype").empty();
$("#temailRetype").removeAttr("aria-invalid");$("#sr-only-error-temailRetype").empty();}});$.validateField({field:"#temail",fields:["#temail","#temailRetype"],icon:false});$.validateField({field:"#temailRetype",fields:["#temailRetype","#temail"],icon:false});$("#temail").blur(function(){checkEmail();
});$("#terms-conditions").on("click",function(b){b.preventDefault();$("#terms").modal("show");});$("#terms").on("show.bs.modal",function(b){$(this).find(".modal-body").load($("#terms-conditions").attr("href"));$("html").css("overflow-y","hidden");});$("#terms").on("hide.bs.modal",function(b){$("html").css("overflow-y","visible");
});$("div.privacy-question").on("click",function(c){c.preventDefault();var b=$(this).find("span.glyphicon");var d=$("#privacy-text");if(d.hasClass("open")){d.slideUp().removeClass("open");b.removeClass("glyphicon-menu-up").addClass("glyphicon-menu-down");}else{d.slideDown().addClass("open");b.removeClass("glyphicon-menu-down").addClass("glyphicon-menu-up");
}});$("#sphoneType").change(function(){var b=UspsEnterpriseReg.regExps.regExptPhone;if($(this).val()==UspsEnterpriseReg.UNITED_STATES_ABBR){$("#tphone").val($("#tphone").val().substring(0,12));$("#tphone").attr("maxlength","12");}else{$("#tphone").attr("maxlength","15");b=UspsEnterpriseReg.regExps.regExptPhoneInternational;
}$("#form-group-tPhone").removeClass("has-error");if(!b.test($("#tphone").val())){$("#form-group-tphone").addClass("has-error");}});$("#btn-begin-create-account").on("click",function(d){d.preventDefault();var b=$(this);if(!b.hasClass("disabled")){$.blockUI();b.addClass("disabled");var c={raccount:$.trim($("#rAccount1").val()),scountry:$.trim($("#scountry").val()),tcompany:$.trim($("#tcompany").val()),taddress:$.trim($("#taddress").val()),tapt:$.trim($("#tapt").val()),tcity:$.trim($("#tcity").val()),sstate:$.trim($("#sstate").val()),tzip:$.trim($("#tzip").val()),turbanCode:$.trim($("#turbanCode").val()),taddress1:$.trim($("#taddress1").val()),taddress2:$.trim($("#taddress2").val()),taddress3:$.trim($("#taddress3").val()),tcityInt:$.trim($("#tcityInt").val()),tprovince:$.trim($("#tprovince").val()),tpostalCode:$.trim($("#tpostalCode").val())};
$.ajax({url:"/entreg/json/ValidateAddressAction",cache:false,type:"post",data:c}).done(function(h){if(h.rs=="success"){$("div.step-1").addClass("hidden");$("div.step-2").removeClass("hidden");b.removeClass("disabled");$.unblockUI();dataLayer.push({"event":"vpvInformedDelivery","virtualPageName":"id-create-account"});
}else{if(h.errors){var k="";for(var f=0;f<h.errors.length;f++){k+=('<div class="error">'+h.errors[f]+"</div>");}$("#validate-form-action-errors").html(k);b.removeClass("disabled");$.unblockUI();}else{if(h.fieldErrors){for(fieldName in h.fieldErrors){if(h.fieldErrors.hasOwnProperty(fieldName)){var j=$("[name='"+fieldName+"']").attr("id");
$("#form-group-"+j).addClass("has-error");for(var g=0;g<h.fieldErrors[fieldName].length;g++){$("#error-"+j).empty().append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(h.fieldErrors[fieldName][g])+"</span>");$("#sr-only-error-"+j).text(h.fieldErrors[fieldName][g]);
}}}$("#"+$("#frm1 div.form-group.has-error:first").attr("id")+"").find(":input:not(:checkbox):not(:button)").filter(":visible:first").focus();b.removeClass("disabled");$.unblockUI();}else{$("#validate-form-action-errors").html('<div class="error">'+h.rs+"</div>");b.removeClass("disabled");$.unblockUI();
}}}}).always(function(){}).fail(function(){});}});$("#informed-delivery-opt-in").on("click",function(b){$(this).is(":checked")?$("#btn-begin-create-account").removeClass("disabled"):$("#btn-begin-create-account").addClass("disabled");});$("#btn-create-account").on("click",function(b){b.preventDefault();
});$("#btn-submit").on("click",function(c){c.preventDefault();var b=$(this);if(!b.hasClass("disabled")){$.blockUI();b.addClass("disabled");$.ajax({url:"/entreg/json/ValidateFormAction",cache:false,type:"post",data:$("#frm1").serialize()}).done(function(g){if(g.rs=="success"){$("#frm1").submit();}else{if(g.errors){var j="";
for(var d=0;d<g.errors.length;d++){j+=('<div class="error">'+g.errors[d]+"</div>");}$("#validate-form-action-errors").html(j);b.removeClass("disabled");$.unblockUI();}else{if(g.fieldErrors){for(fieldName in g.fieldErrors){if(g.fieldErrors.hasOwnProperty(fieldName)){var h=$("[name='"+fieldName+"']").attr("id");
$("#form-group-"+h).addClass("has-error");for(var f=0;f<g.fieldErrors[fieldName].length;f++){$("#error-"+h).empty().append('<span class="error-txt-blk"><!--<span class="glyphicon glyphicon-minus-sign" aria-hidden="true"></span> -->'+sanitizeHtmlOut(g.fieldErrors[fieldName][f])+"</span>");$("#sr-only-error-"+h).text(g.fieldErrors[fieldName][f]);
}}}$("#"+$("#frm1 div.form-group.has-error:first").attr("id")+"").find(":input:not(:checkbox):not(:button)").filter(":visible:first").focus();b.removeClass("disabled");$.unblockUI();}else{if(g.rs==UspsEnterpriseReg.CONFIRM){$("#confirm-modal").modal("show");}else{$("#validate-form-action-errors").html('<div class="error">'+g.rs+"</div>");
b.removeClass("disabled");$.unblockUI();}}}}}).always(function(){}).fail(function(){});}});$("#btn-submit-verifyEmailDlg").on("click",function(b){b.preventDefault();$("#email-verification-error").addClass("hidden");if($.trim($("#temail").val())!=$.trim($("#tEmailVerification").val())){$("#email-verification-error").removeClass("hidden");
}else{$("#btn-submit").addClass("disabled");$("#confirm-modal").modal("hide");$("#frm1").submit();$.blockUI();}});$("#confirm-modal").on("show.bs.modal",function(b){$("#email-verification-error").addClass("hidden");$("#tEmailVerification").val("");$("#btn-submit").removeClass("disabled");$.unblockUI();
});addressWizardPersonalSetup();$("#address-section").show();if($("#validation-errors").val()=="true"){addressObj={company:$.trim($("#tcompany").val()),address1:$.trim($("#taddress").val()),adddress2:$.trim($("#tapt").val()),city:$.trim($("#tcity").val()),state:$.trim($("#sstate").val()),postalcode:$.trim($("#tzip").val()),urbancode:$.trim($("#turbanCode").val()),country:$("#scountry").val(),doNotAMS:false};
populateFinalAddressDisplay(addressObj);progressWizardFinished("addressHolderStep1","addressHolderStep6");$("div.step-1").addClass("hidden");$("div.step-2").removeClass("hidden");}});